(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aa205"],{"104d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bid-bond-wrapper"},[a("a-card",[a("Heading",{attrs:{name:"投标保证金"}},[1==t.pageType?a("a-button",{attrs:{type:"primary"},on:{click:t.fnFresh}},[a("i",{class:["iconfont","icon-baocun"]}),t._v(" 刷新 ")]):t._e()],1),a("a-table",{staticClass:"es-table",attrs:{bordered:"",size:"small",rowKey:"replyBondMoneyId",loading:t.pageData.loading,pagination:!1,columns:t.columns,dataSource:t.dataSource,scroll:{x:!0}},scopedSlots:t._u([{key:"paymentVoucher",fn:function(e){return[a("a",[t._v(t._s(e))])]}},{key:"operationState",fn:function(e){return[t._v(" "+t._s(t.operationState[e])+" ")]}},{key:"payMode",fn:function(e){return[t._v(" "+t._s(t.payMode[e])+" ")]}},{key:"action",fn:function(e,n){return 1==t.pageType?[0!=n.bondMoney?a("div",[a("a-popconfirm",{on:{confirm:function(e){return t.handleAction(n,0)}}},[a("template",{slot:"title"},[a("p",[t._v("若您已经完成付款、但“付款状态“未更新，请等待两分钟。")]),a("p",[t._v("若长时间未更新, 请先联系工作人员处理, 勿重复付款。")]),a("p",[t._v("确定要再次进行线上付款吗?")])]),400==n.operationState?a("a",{staticStyle:{"margin-right":"8px"}},[t._v(" 线上付款 ")]):t._e()],2),a("a-popconfirm",{on:{confirm:function(e){return t.handleAction(n,1)}}},[a("template",{slot:"title"},[a("p",[t._v("若您已经完成付款、但“付款状态“未更新, 请等待两分钟。")]),a("p",[t._v("若长时间未更新，请先联系工作人员处理, 勿重复付款。")]),a("p",[t._v("确定要改为线下付款吗?")])]),400==n.operationState?a("a",{staticStyle:{"margin-right":"8px"}},[t._v(" 线下付款 ")]):t._e()],2),a("a-popconfirm",{on:{confirm:function(e){return t.handleAction(n,2)}}},[a("template",{slot:"title"},[a("p",[t._v("取消付款后，可重新进行线下或线上付款操作。")]),a("p",[t._v("是否确认取消付款?")])]),2==n.payMode&&401==n.operationState?a("a",{staticStyle:{"margin-right":"8px"}},[t._v(" 取消付款 ")]):t._e()],2),a("a-popover",{attrs:{placement:"bottom",content:"系统支持mht/rar/zip格式的附件上传，最大不能超30M。"}},[2==n.payMode&&401==n.operationState?a("a",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.handleAction(n,3)}}},[t._v(" 上传付款凭证 ")]):t._e()])],1):t._e()]:void 0}}],null,!0)}),0==t.pageType?a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.pageData.total>0,expression:"pageData.total > 0"}],attrs:{value:t.pageData.page,pageSize:t.pageData.limit,total:t.pageData.total},on:{change:t.sizeChange,showSizeChange:t.pageChange}}):t._e()],1)],1)},o=[],i=(a("a434"),a("a9e3"),a("d3b7"),a("2909")),r=a("5530"),s=a("5880"),c=a("6769"),p={name:"bid-bond",components:{Heading:function(){return a.e("chunk-e2119ce0").then(a.bind(null,"8ab7"))},pagination:function(){return a.e("chunk-03edaf33").then(a.bind(null,"325f"))}},props:{pageType:{type:[String,Number],default:0},operationState:{type:Array,default:function(){return[]}},payMode:{type:Array,default:function(){return[]}}},data:function(){return{pageData:{limit:15,total:0,page:1,loading:!1},dataSource:[],columns:[],columnsData:[{title:"序号",dataIndex:"number",align:"center",customRender:function(t,e,a){return"".concat(a+1)},width:80},{title:"标名",dataIndex:"tenderName",width:150},{title:"包名",dataIndex:"contractName",width:150},{title:"投标保证金金额(元)",dataIndex:"bondMoney",width:160,align:"right"},{title:"付款方式",dataIndex:"payMode",width:160,align:"center",scopedSlots:{customRender:"payMode"}},{title:"付款状态",dataIndex:"operationState",width:100,align:"center",scopedSlots:{customRender:"operationState"}},{title:"付款时间",dataIndex:"payTime",width:160,align:"center"},{title:"付款凭证",dataIndex:"paymentVoucher",width:130,align:"center",scopedSlots:{customRender:"paymentVoucher"}},{title:"操作",align:"center",scopedSlots:{customRender:"action"},width:200}]}},created:function(){this.fnInit()},computed:Object(r["a"])(Object(r["a"])({},Object(s["mapGetters"])("account",["dictionary","user"])),{},{projectId:function(){return this.$route.params.id}}),methods:{fnInit:function(){this.columns=[];var t=Object(i["a"])(this.columnsData),e=this.columnsData.length-1;0==this.pageType&&t.splice(e,1),this.columns=Object(i["a"])(t),this.fnGetData()},fnGetData:function(t){var e=this,a={limit:this.pageData.limit,page:this.pageData.page,projectId:this.projectId,providerId:this.user.userId};this.pageData.loading=!0,Object(c["h"])(a).then((function(a){var n=a.data||{},o=n.responseResult||{};if("0000"==n.errCode){var i=o.data,r=o.total;e.dataSource=i,e.pageData.total=Number(r),"refresh"==t&&e.$message.success("刷新成功",3)}else e.$error({title:"错误提示",content:e.BASE.handleErrorMsg(n)});e.pageData.loading=!1}))},fnFresh:function(){this.fnGetData("refresh")},handleAction:function(t,e){var a=this,n={};switch(e){case 0:n={cancelFlag:!1,payBussId:t.replyBondMoneyId,payBussType:1},Object(c["c"])(n).then((function(t){var e=t.data||{};"0000"==e.errCode?(a.$message.success(e.responseResult,3),a.fnGetData()):a.$error({title:"错误提示",content:a.BASE.handleErrorMsg(e)})}));break;case 1:n={cancelFlag:!1,payBussId:t.replyBondMoneyId,payBussType:2},Object(c["c"])(n).then((function(t){var e=t.data||{};"0000"==e.errCode?(a.$message.success(e.responseResult,3),a.fnGetData()):a.$error({title:"错误提示",content:a.BASE.handleErrorMsg(e)})}));break;case 2:n={cancelFlag:!0,payBussId:t.replyBondMoneyId,payBussType:2},Object(c["c"])(n).then((function(t){var e=t.data||{};"0000"==e.errCode?(a.$message.success(e.responseResult,3),a.fnGetData()):a.$error({title:"错误提示",content:a.BASE.handleErrorMsg(e)})}));break;case 3:this.$message.info("此功能暂不支持");break}},sizeChange:function(t,e){this.pageData.page=t,this.pageData.limit=e,this.fnGetData()},pageChange:function(t,e){this.pageData.page=t,this.pageData.limit=e,this.fnGetData()}}},l=p,d=a("2877"),u=Object(d["a"])(l,n,o,!1,null,null,null);e["default"]=u.exports}}]);