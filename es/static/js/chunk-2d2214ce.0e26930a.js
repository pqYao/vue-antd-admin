(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2214ce"],{ca82:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchase-files-wrapper"},[a("a-card",[a("Heading",{attrs:{name:"采购文件"},scopedSlots:t._u([{key:"leftIcon",fn:function(){return[a("a-popover",{attrs:{placement:"bottom"}},[a("template",{slot:"content"},[a("p",[t._v("1、费用不为0的采购文件须完成付款并等待采购方确认后才能下载；免费的采购文件可直接下载。")]),a("p",[t._v("2、线上付款完成后，若付款状态未及时更新，请先联系工作人员处理，勿重复付款。")])]),a("a-icon",{attrs:{type:"question-circle"}})],2)]},proxy:!0}])},[1==t.pageType?a("a-button",{attrs:{type:"primary"},on:{click:t.fnFresh}},[a("i",{class:["iconfont","icon-baocun"]}),t._v(" 刷新 ")]):t._e()],1),a("a-table",{staticClass:"es-table",attrs:{bordered:"",size:"small",rowKey:"replyFileId",loading:t.pageData.loading,pagination:!1,columns:t.columns,dataSource:t.dataSource,scroll:{x:!0}},scopedSlots:t._u([{key:"paymentVoucher",fn:function(e){return[a("a",[t._v(t._s(e))])]}},{key:"operationState",fn:function(e){return[t._v(" "+t._s(t.operationState[e])+" ")]}},{key:"payMode",fn:function(e){return[t._v(" "+t._s(t.payMode[e])+" ")]}},{key:"action",fn:function(e,n){return[a("a-popconfirm",{on:{confirm:function(e){return t.handleAction(n,0)}}},[a("template",{slot:"title"},[a("p",[t._v("是否确定线上付款?")])]),400==n.operationState?a("a",{staticStyle:{"margin-right":"8px"}},[t._v(" 线上付款 ")]):t._e()],2),a("a-popconfirm",{on:{confirm:function(e){return t.handleAction(n,1)}}},[a("template",{slot:"title"},[a("p",[t._v("是否确定线下付款?")])]),400==n.operationState?a("a",{staticStyle:{"margin-right":"8px"}},[t._v(" 线下付款 ")]):t._e()],2),a("a-popconfirm",{on:{confirm:function(e){return t.handleAction(n,2)}}},[a("template",{slot:"title"},[a("p",[t._v("取消付款后，可重新进行线下或线上付款操作。")]),a("p",[t._v("是否确认取消付款?")])]),2==n.payMode&&401==n.operationState?a("a",{staticStyle:{"margin-right":"8px"}},[t._v(" 取消付款 ")]):t._e()],2),a("a-popover",{attrs:{placement:"bottom",content:"系统支持mht/rar/zip格式的附件上传，最大不能超30M."}},[2==n.payMode&&401==n.operationState?a("a",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.handleAction(n,4)}}},[t._v(" 上传付款凭证 ")]):t._e()]),403==n.operationState?a("a",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.handleAction(n,3)}}},[t._v(" 下载采购文件 ")]):t._e()]}}])}),0==t.pageType?a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.pageData.total>0,expression:"pageData.total > 0"}],attrs:{value:t.pageData.page,pageSize:t.pageData.limit,total:t.pageData.total},on:{change:t.sizeChange,showSizeChange:t.pageChange}}):t._e()],1)],1)},i=[],o=(a("a434"),a("a9e3"),a("d3b7"),a("2909")),r=a("5530"),s=a("5880"),c=a("6769"),p={name:"purchase-files",components:{Heading:function(){return a.e("chunk-e2119ce0").then(a.bind(null,"8ab7"))},pagination:function(){return a.e("chunk-03edaf33").then(a.bind(null,"325f"))}},props:{pageType:{type:[String,Number],default:0},operationState:{type:Array,default:function(){return[]}},payMode:{type:Array,default:function(){return[]}}},data:function(){return{pageData:{limit:15,total:0,page:1,loading:!1},dataSource:[],columns:[],columnsData:[{title:"序号",dataIndex:"number",align:"center",customRender:function(t,e,a){return"".concat(a+1)},width:80,fixed:"left"},{title:"标名",dataIndex:"tenderName",width:150},{title:"包名",dataIndex:"contractName",width:150},{title:"采购文件",dataIndex:"2",width:160,align:"center"},{title:"费用",dataIndex:"tenderMoney",width:100,align:"right"},{title:"付款方式",dataIndex:"payMode",width:100,align:"center",scopedSlots:{customRender:"payMode"}},{title:"付款状态",dataIndex:"operationState",width:120,align:"center",scopedSlots:{customRender:"operationState"}},{title:"付款时间",dataIndex:"payTime",width:160,align:"center"},{title:"付款凭证",dataIndex:"paymentVoucher",width:130,align:"center",scopedSlots:{customRender:"paymentVoucher"}},{title:"操作",align:"center",scopedSlots:{customRender:"action"},width:230,fixed:"right"}]}},created:function(){this.fnInit()},computed:Object(r["a"])(Object(r["a"])({},Object(s["mapGetters"])("account",["dictionary","user"])),{},{projectId:function(){return this.$route.params.id}}),methods:{fnInit:function(){this.columns=[];var t=Object(o["a"])(this.columnsData),e=this.columnsData.length-1;0==this.pageType&&t.splice(e,1),this.columns=Object(o["a"])(t),this.fnGetData()},fnGetData:function(t){var e=this,a={limit:this.pageData.limit,page:this.pageData.page,projectId:this.projectId,providerId:this.user.userId};this.pageData.loading=!0,Object(c["j"])(a).then((function(a){var n=a.data||{},i=n.responseResult||{};if("0000"==n.errCode){var o=i.data,r=i.total;e.dataSource=o,e.pageData.total=Number(r),"refresh"==t&&e.$message.success("刷新成功",3)}else e.$error({title:"错误提示",content:e.BASE.handleErrorMsg(n)});e.pageData.loading=!1}))},fnFresh:function(){this.fnGetData("refresh")},handleAction:function(t,e){var a=this,n={};switch(e){case 0:n={cancelFlag:!1,payBussId:t.replyFileId,payBussType:1},Object(c["o"])(n).then((function(t){var e=t.data||{};"0000"==e.errCode?(a.$message.success(e.responseResult.payReturnMsg,3),a.fnGetData()):a.$error({title:"错误提示",content:a.BASE.handleErrorMsg(e)})}));break;case 1:n={cancelFlag:!1,payBussId:t.replyFileId,payBussType:2},Object(c["o"])(n).then((function(t){var e=t.data||{};"0000"==e.errCode?(a.$message.success(e.responseResult.payReturnMsg,3),a.fnGetData()):a.$error({title:"错误提示",content:a.BASE.handleErrorMsg(e)})}));break;case 2:n={cancelFlag:!0,payBussId:t.replyFileId,payBussType:2},Object(c["o"])(n).then((function(t){var e=t.data||{};"0000"==e.errCode?(a.$message.success(e.responseResult.payReturnMsg,3),a.fnGetData()):a.$error({title:"错误提示",content:a.BASE.handleErrorMsg(e)})}));break;case 3:this.$message.info("此功能暂不支持");break;case 4:this.$message.info("此功能暂不支持");break}},sizeChange:function(t,e){this.pageData.page=t,this.pageData.limit=e,this.fnGetData()},pageChange:function(t,e){this.pageData.page=t,this.pageData.limit=e,this.fnGetData()}}},l=p,u=a("2877"),d=Object(u["a"])(l,n,i,!1,null,null,null);e["default"]=d.exports}}]);