(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f338"],{b32c:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{staticClass:"contact-info-wrapper"},[t("Heading",{attrs:{name:"联系人信息"}},[1==e.pageType?t("a-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[t("i",{class:["iconfont","icon-baocun"]}),e._v(" 保存 ")]):e._e()],1),0==e.pageType?t("Descriptions",{attrs:{list:e.labelList,param:e.formData}}):t("a-form",{staticClass:"es-form",attrs:{form:e.form,layout:"horizontal"},nativeOn:{keydown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:(a.preventDefault(),e.handleSubmit(a))}}},[t("a-row",[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",e._b({attrs:{label:"联系人"}},"a-form-item",e.BASE.oneItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["linkman",{validateTrigger:["blur"],initialValue:e.formData.linkman,rules:[{required:!0,message:"请选择联系人"}]}],expression:"[\n                `linkman`,\n                {\n                  validateTrigger: ['blur'],\n                  initialValue: formData.linkman,\n                  rules: [{ required: true, message: '请选择联系人' }]\n                }\n              ]"}],attrs:{placeholder:"请选择"},on:{click:function(a){return e.onSearch("linkman")}}},[t("a-icon",{attrs:{slot:"suffix",type:"search"},on:{click:function(a){return e.onSearch("linkman")}},slot:"suffix"})],1)],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",e._b({attrs:{label:"电话"}},"a-form-item",e.BASE.oneItemLayout,!1),[t("a-input",{attrs:{disabled:"",placeholder:"根据联系人自动带出"},model:{value:e.formData.linkmanPhone,callback:function(a){e.$set(e.formData,"linkmanPhone",a)},expression:"formData.linkmanPhone"}})],1)],1)],1)],1),e.linkmanVisible?t("a-modal",{attrs:{title:"选择联系人",width:"80%",centered:!0,maskClosable:!1},on:{ok:function(a){return e.handleSelectOk("linkman")}},model:{value:e.linkmanVisible,callback:function(a){e.linkmanVisible=a},expression:"linkmanVisible"}},[t("contact-select",{ref:"linkman",attrs:{param:e.contactParam}})],1):e._e()],1)},r=[],i=(t("a9e3"),t("d3b7"),t("ade3")),o=t("5530"),s=t("5880"),l=t("6769"),c={name:"contact-info",components:{Heading:function(){return t.e("chunk-e2119ce0").then(t.bind(null,"8ab7"))},Descriptions:function(){return t.e("chunk-645cdc36").then(t.bind(null,"57e4"))},ContactSelect:function(){return Promise.all([t.e("chunk-6977438e"),t.e("chunk-8c4534fa")]).then(t.bind(null,"af66"))}},props:{pageType:{type:[String,Number],default:0},baseData:{type:Object,default:function(){return{}}}},data:function(){return{form:this.$form.createForm(this),formData:{},linkmanVisible:!1,contactParam:{},labelList:[{label:"联系人",key:"linkman",show:!0},{label:"电话",key:"linkmanPhone",show:!0}]}},computed:Object(o["a"])({},Object(s["mapGetters"])("account",["dictionary","user"])),watch:{baseData:{handler:function(){this.formData=Object.assign({},this.baseData)},deep:!0}},created:function(){this.formData=Object.assign({},this.baseData)},methods:{handleSubmit:function(){var e=this;this.form.validateFields((function(a,t){if(!a){for(var n in t)e.formData[n]=t[n];e.formData.providerId=e.user.userId,Object(l["q"])(e.formData).then((function(a){var t=a.data||{};"0000"==t.errCode?(e.$router.push({query:{sid:t.responseResult}}),e.$emit("update-base-info",t.responseResult),e.$message.success("保存成功",3)):e.$error({title:"错误提示",content:e.BASE.handleErrorMsg(t)})}))}}))},onSearch:function(e){this["".concat(e,"Visible")]=!0,this.contactParam={vendorId:this.baseData.providerId}},handleSelectOk:function(e){var a=this.$refs[e].getRes();this.form.setFieldsValue(Object(i["a"])({},e,a.userName)),this.formData.linkmanPhone=a.userPhone,this.formData.linkmanId=a.vendorUserId,this["".concat(e,"Visible")]=!1}}},u=c,m=t("2877"),f=Object(m["a"])(u,n,r,!1,null,null,null);a["default"]=f.exports}}]);