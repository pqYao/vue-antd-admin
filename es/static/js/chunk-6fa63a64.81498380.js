(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fa63a64"],{"21ae":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"answer-info-wrapper"},[a("a-card",[a("Heading",{attrs:{name:"应答信息"}}),a("a-table",{staticClass:"es-table",attrs:{bordered:"",size:"small",rowKey:"replyDetailId",loading:t.pageData.loading,pagination:!1,columns:t.columns,dataSource:t.dataSource,scroll:{x:!0}},scopedSlots:t._u([{key:"operationState",fn:function(e){return[t._v(" "+t._s(t.editOperationState[e])+" ")]}},{key:"action",fn:function(e,n){return[a("a-popconfirm",{attrs:{overlayClassName:-1!=t.submitTitle.indexOf("已超过")?"pop-comfirm-wrapper":"","ok-text":"确定",title:t.submitTitle},on:{confirm:function(e){return t.fnConfirmSubmit(n)}}},[500==n.operationState||501==n.operationState?a("a",{staticStyle:{"margin-right":"8px"},on:{mouseenter:function(e){return t.fnJudgeCanbeSubmit(n)},click:function(e){return t.handleAction(n.replyDetailId,1)}}},[t._v(" 编辑 ")]):t._e()]),a("a-popconfirm",{attrs:{overlayClassName:"0007"==t.errCode?"pop-comfirm-wrapper":"","ok-text":t.isCanbeSubmit||"0007"==t.errCode?"确定":"编辑",title:t.submitTitle},on:{confirm:function(e){return t.fnConfirmSubmit(n)}}},[500==n.operationState||501==n.operationState?a("a",{staticStyle:{"margin-right":"8px"},on:{mouseenter:function(e){return t.fnJudgeCanbeSubmit(n)}}},[t._v(" 提交应答信息 ")]):t._e()]),502==n.operationState||503==n.operationState?a("a",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.handleAction(n.replyDetailId,0)}}},[t._v(" 查看 ")]):t._e(),a("a-popconfirm",{attrs:{title:"确定撤回应答信息?"},on:{confirm:function(e){return t.fnConfirmWithdrew(n)}}},[502==n.operationState?a("a",{staticStyle:{"margin-right":"8px"}},[t._v(" 撤回应答信息 ")]):t._e()])]}}])}),0==t.pageType?a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.pageData.total>0,expression:"pageData.total > 0"}],attrs:{value:t.pageData.page,pageSize:t.pageData.limit,total:t.pageData.total},on:{change:t.sizeChange,showSizeChange:t.pageChange}}):t._e()],1)],1)},i=[],r=(a("a434"),a("a9e3"),a("d3b7"),a("2909")),o=a("5530"),s=a("5880"),c=a("6769"),l={name:"answer-info",components:{Heading:function(){return a.e("chunk-e2119ce0").then(a.bind(null,"8ab7"))},pagination:function(){return a.e("chunk-03edaf33").then(a.bind(null,"325f"))}},props:{pageType:{type:[String,Number],default:0},editOperationState:{type:Array,default:function(){return[]}}},data:function(){return{isCanbeSubmit:!1,submitTitle:"",popConClassName:"",errCode:"",pageData:{limit:15,total:0,page:1,loading:!1},dataSource:[],columns:[],columnsData:[{title:"序号",dataIndex:"number",align:"center",customRender:function(t,e,a){return"".concat(a+1)},width:80,fixed:"left"},{title:"标名",dataIndex:"tenderName",width:150},{title:"包名",dataIndex:"contractName",width:150},{title:"未含税总价(元)",dataIndex:"totalMoneyFree",width:130,align:"right"},{title:"含税总价(元)",dataIndex:"totalMoney",width:120,align:"right"},{title:"税额(元)",dataIndex:"taxMoney",width:120,align:"right"},{title:"税率(%)",dataIndex:"taxRate",width:100,align:"right"},{title:"折扣率(%)",dataIndex:"encryptState",width:100,align:"right"},{title:"报价文件",dataIndex:"444",width:120,align:"center"},{title:"技术文件",dataIndex:"555",width:120,align:"center"},{title:"商务文件",dataIndex:"666",width:120,align:"center"},{title:"编辑状态",dataIndex:"operationState",width:120,align:"center",scopedSlots:{customRender:"operationState"}},{title:"操作",align:"center",scopedSlots:{customRender:"action"},width:150,fixed:"right"}]}},created:function(){this.fnInit()},activated:function(){this.fnInit()},computed:Object(o["a"])(Object(o["a"])({},Object(s["mapGetters"])("account",["dictionary","user"])),{},{projectId:function(){return this.$route.params.id}}),methods:{fnInit:function(){this.columns=[];var t=Object(r["a"])(this.columnsData),e=this.columnsData.length-1;0==this.pageType&&t.splice(e,1),this.columns=Object(r["a"])(t),this.fnGetData()},fnGetData:function(){var t=this,e={limit:this.pageData.limit,page:this.pageData.page,projectId:this.projectId,providerId:this.user.userId};this.pageData.loading=!0,Object(c["f"])(e).then((function(e){var a=e.data||{},n=a.responseResult||{};if("0000"==a.errCode){var i=n.data,r=n.total;t.dataSource=i,t.pageData.total=Number(r)}else t.$error({title:"错误提示",content:t.BASE.handleErrorMsg(a)});t.pageData.loading=!1}))},fnJudgeCanbeSubmit:function(t){var e=this,a={replyDetailId:t.replyDetailId,checkFlag:!0};Object(c["m"])(a).then((function(t){var a=t.data;e.errCode=a.errCode,"0000"==a.errCode?(e.isCanbeSubmit=!0,e.submitTitle="确定提交应答信息?"):("0007"==e.errCode?e.submitTitle=a.customMess:e.submitTitle="应答信息不完善，是否继续编辑?",e.isCanbeSubmit=!1)}))},fnConfirmSubmit:function(t){var e=this;if("0007"!=this.errCode){var a={replyDetailId:t.replyDetailId,checkFlag:!1};this.isCanbeSubmit?Object(c["m"])(a).then((function(t){var a=t.data;"0000"==a.errCode?(e.fnGetData(),e.$message.success(a.responseResult,3)):e.$error({content:e.BASE.handleErrorMsg(a)})})):this.$router.push({path:"/response/answer-info-edit/".concat(t.replyDetailId)})}else this.$router.push({path:"/response/answer-info-detail/".concat(t.replyDetailId),query:{pid:this.projectId}})},fnConfirmWithdrew:function(t){var e=this,a={replyDetailId:t.replyDetailId,checkFlag:!1};Object(c["n"])(a).then((function(t){var a=t.data||{};"0000"==a.errCode?(e.$message.success(a.responseResult,3),e.fnGetData()):e.$error({title:"错误提示",content:e.BASE.handleErrorMsg(a)})}))},handleAction:function(t,e){1==e&&"0007"==this.errCode||(1==e?this.$router.push({path:"/response/answer-info-edit/".concat(t),query:{pid:this.projectId}}):this.$router.push({path:"/response/answer-info-detail/".concat(t),query:{pid:this.projectId}}))},sizeChange:function(t,e){this.pageData.page=t,this.pageData.limit=e,this.fnGetData()},pageChange:function(t,e){this.pageData.page=t,this.pageData.limit=e,this.fnGetData()}}},d=l,u=(a("75ed5"),a("2877")),p=Object(u["a"])(d,n,i,!1,null,null,null);e["default"]=p.exports},"75ed5":function(t,e,a){"use strict";var n=a("df93"),i=a.n(n);i.a},df93:function(t,e,a){}}]);