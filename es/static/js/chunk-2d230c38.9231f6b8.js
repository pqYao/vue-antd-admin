(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d230c38"],{ee57:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{staticClass:"quote-price-wrapper"},[t("Heading",{attrs:{name:"报价信息"}},[1==e.pageType?t("a-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[t("i",{class:["iconfont","icon-baocun"]}),e._v(" 保存 ")]):e._e()],1),0==e.pageType?t("Descriptions",{attrs:{list:e.labelList,param:e.formData}}):t("a-form",{staticClass:"es-form",attrs:{form:e.form,layout:"horizontal"},nativeOn:{keydown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:(a.preventDefault(),e.handleSubmit(a))}}},[t("a-row",[-1!=e.isRequiredStr.indexOf("税率")?t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",e._b({attrs:{label:"税率(%)"}},"a-form-item",e.BASE.oneItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["taxRate",{validateTrigger:["blur"],initialValue:e.formData.taxRate,rules:[{required:!0,validator:e.validTaxRate}]}],expression:"[\n                `taxRate`,\n                {\n                  validateTrigger: ['blur'],\n                  initialValue: formData.taxRate,\n                  rules: [{ required: true, validator: validTaxRate }]\n                }\n              ]"}],attrs:{allowClear:"",type:"number",placeholder:"请输入"}})],1)],1):e._e(),-1!=e.isRequiredStr.indexOf("折扣率")?t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",e._b({attrs:{label:"折扣率(%)"}},"a-form-item",e.BASE.oneItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["rebateRate",{validateTrigger:["blur"],initialValue:e.formData.rebateRate,rules:[{required:!0,validator:e.validRebateRate}]}],expression:"[\n                `rebateRate`,\n                {\n                  validateTrigger: ['blur'],\n                  initialValue: formData.rebateRate,\n                  rules: [{ required: true, validator: validRebateRate }]\n                }\n              ]"}],attrs:{allowClear:"",type:"number",placeholder:"请输入"}})],1)],1):e._e(),-1!=e.isRequiredStr.indexOf("含税总价")?t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",e._b({attrs:{label:"含税总价(元)"}},"a-form-item",e.BASE.oneItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["totalMoney",{validateTrigger:["blur"],initialValue:e.formData.totalMoney,rules:[{required:!0,validator:e.validTotalMoney}]}],expression:"[\n                `totalMoney`,\n                {\n                  validateTrigger: ['blur'],\n                  initialValue: formData.totalMoney,\n                  rules: [{ required: true, validator: validTotalMoney }]\n                }\n              ]"}],attrs:{allowClear:"",type:"number",placeholder:"请输入"}})],1)],1):e._e(),-1!=e.isRequiredStr.indexOf("不含税单价")?t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",e._b({attrs:{label:"不含税单价(元)"}},"a-form-item",e.BASE.oneItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["priceFree",{validateTrigger:["blur"],initialValue:e.formData.priceFree,rules:[{required:!0,validator:e.validPriceFree}]}],expression:"[\n                `priceFree`,\n                {\n                  validateTrigger: ['blur'],\n                  initialValue: formData.priceFree,\n                  rules: [{ required: true, validator: validPriceFree }]\n                }\n              ]"}],attrs:{allowClear:"",type:"number",placeholder:"请输入"}})],1)],1):e._e(),-1!=e.isRequiredStr.indexOf("含税单价")?t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",e._b({attrs:{label:"含税单价(元)"}},"a-form-item",e.BASE.oneItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{validateTrigger:["blur"],initialValue:e.formData.price,rules:[{required:!0,validator:e.validPrice}]}],expression:"[\n                `price`,\n                {\n                  validateTrigger: ['blur'],\n                  initialValue: formData.price,\n                  rules: [{ required: true, validator: validPrice }]\n                }\n              ]"}],attrs:{allowClear:"",type:"number",placeholder:"请输入"}})],1)],1):e._e(),-1!=e.isRequiredStr.indexOf("不含税总价")?t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",e._b({attrs:{label:"不含税总价(元)"}},"a-form-item",e.BASE.oneItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["totalMoneyFree",{validateTrigger:["blur"],initialValue:e.formData.totalMoneyFree,rules:[{required:!0,validator:e.validTotalMoneyFree}]}],expression:"[\n                `totalMoneyFree`,\n                {\n                  validateTrigger: ['blur'],\n                  initialValue: formData.totalMoneyFree,\n                  rules: [{ required: true, validator: validTotalMoneyFree }]\n                }\n              ]"}],attrs:{allowClear:"",type:"number",placeholder:"请输入"}})],1)],1):e._e(),-1!=e.isRequiredStr.indexOf("税额")?t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",e._b({attrs:{label:"税额(元)"}},"a-form-item",e.BASE.oneItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["taxMoney",{validateTrigger:["blur"],initialValue:e.formData.taxMoney,rules:[{required:!0,validator:e.validTaxMoney}]}],expression:"[\n                `taxMoney`,\n                {\n                  validateTrigger: ['blur'],\n                  initialValue: formData.taxMoney,\n                  rules: [{ required: true, validator: validTaxMoney }]\n                }\n              ]"}],attrs:{allowClear:"",type:"number",placeholder:"请输入"}})],1)],1):e._e()],1)],1)],1)},i=[],l=(t("4160"),t("c975"),t("a9e3"),t("d3b7"),t("159b"),t("5530")),n=t("5880"),o=t("6769"),s={name:"quote-price",components:{Heading:function(){return t.e("chunk-e2119ce0").then(t.bind(null,"8ab7"))},Descriptions:function(){return t.e("chunk-645cdc36").then(t.bind(null,"57e4"))}},props:{pageType:{type:[String,Number],default:0},baseData:{type:Object,default:function(){return{}}}},data:function(){return{isRequiredStr:"",form:this.$form.createForm(this),formData:{},labelList:[{label:"税率(%)",key:"taxRate",show:!1,judgeKey:"税率"},{label:"折扣率(%)",key:"rebateRate",show:!1,judgeKey:"折扣率"},{label:"含税单价(元)",key:"price",show:!1,judgeKey:"含税单价"},{label:"不含税单价(元)",key:"priceFree",show:!1,judgeKey:"不含税单价"},{label:"含税总价(元)",key:"totalMoney",show:!1,judgeKey:"含税总价"},{label:"不含税总价(元)",key:"totalMoneyFree",show:!1,judgeKey:"不含税总价"},{label:"税额(元)",key:"taxMoney",show:!1,judgeKey:"税额"}]}},computed:Object(l["a"])(Object(l["a"])({},Object(n["mapGetters"])("account",["dictionary","user"])),{},{projectId:function(){return this.$route.params.id}}),watch:{baseData:function(){this.fnInit()}},created:function(){this.fnInit()},methods:{fnInit:function(){var e=this;this.formData=Object.assign({},this.baseData),this.isRequiredStr=this.dictionary.offerWay[this.formData.offerWay]||"",this.labelList.forEach((function(a){-1!=e.isRequiredStr.indexOf(a.judgeKey)&&(a.show=!0)}))},handleSubmit:function(){var e=this;this.form.validateFieldsAndScroll(this.BASE.formScrollOptions,(function(a,t){if(!a){var r={};for(var i in t)r[i]=t[i];e.formData=Object.assign(e.formData,r),Object(o["p"])(e.formData).then((function(a){var t=a.data||{};"0000"==t.errCode?e.$message.success(t.responseResult,3):e.$error({title:"错误提示",content:e.BASE.handleErrorMsg(t)})}))}}))},validTaxRate:function(e,a,t){if(this.BASE.CheckIsNullOrEmpty(a)){var r=this.BASE.reg.mountReg;r.test(a)||t("请输入正确的数字"),t()}else t("请输入税率")},validPriceFree:function(e,a,t){if(this.BASE.CheckIsNullOrEmpty(a)){var r=this.BASE.reg.mountReg;r.test(a)||t("请输入正确的金额"),t()}else t("请输入不含税单价")},validPrice:function(e,a,t){if(this.BASE.CheckIsNullOrEmpty(a)){var r=this.BASE.reg.mountReg;r.test(a)||t("请输入正确的金额"),t()}else t("请输入含税单价")},validRebateRate:function(e,a,t){if(this.BASE.CheckIsNullOrEmpty(a)){var r=this.BASE.reg.mountReg;r.test(a)||t("请输入正确的数字"),t()}else t("请输入折扣率")},validTotalMoney:function(e,a,t){if(this.BASE.CheckIsNullOrEmpty(a)){var r=this.BASE.reg.moneyReg;r.test(a)||t("请输入正确的金额"),t()}else t("请输入含税总价")},validTotalMoneyFree:function(e,a,t){if(this.BASE.CheckIsNullOrEmpty(a)){var r=this.BASE.reg.moneyReg;r.test(a)||t("请输入正确的金额"),t()}else t("请输入未含税总价")},validTaxMoney:function(e,a,t){if(this.BASE.CheckIsNullOrEmpty(a)){var r=this.BASE.reg.moneyReg;r.test(a)||t("请输入正确的金额"),t()}else t("请输入税额")},onSearch:function(e){this["".concat(e,"Visible")]=!0},handleSelectOk:function(e){this.$refs[e].getRes();this["".concat(e,"Visible")]=!1}}},u=s,d=t("2877"),c=Object(d["a"])(u,r,i,!1,null,null,null);a["default"]=c.exports}}]);